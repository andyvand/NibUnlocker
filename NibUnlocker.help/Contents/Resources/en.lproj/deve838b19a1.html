<html lang="en"><head><meta charset="UTF-8"><title>Migrate to Swift 4 @objc inference</title><meta name="description" content="Reduce binary size by migrating to using Swift 4 explicit @objc attributes with the Minimize Inference option. See “Migrate to using Swift 4 explicit @objc attributes” in Xcode Help for how to complete the migration."></head><body dir="ltr" id="deve838b19a1" class="AppleTopic apd-topic" data-isTaskOpen="false"><a name="deve838b19a1"></a><figure class="topicIcon"><img src="../GlobalArt/AppIconDefault.png" alt="" height="30" width="30"></figure><h1>Migrate to Swift 4 @objc inference</h1><p>Convert your code to use Swift 4 explicit <code>@objc</code> attributes to reduce overall code size.</p><p>To start the conversion process choose Edit &gt; Convert &gt; To Current Swift Syntax, choose the target in the sheet that appears, and then click Next. In the next sheet select an option for adding <code>@objc</code> attributes to your code where they were previously inferred implicitly.</p><ul><li><p><strong>Minimize Inference:</strong> Add an <code>@objc</code> attribute to your code only where it is needed based on static inference. After using this option you need to follow the manual steps detailed in <a href="deve838b19a1.html#devded6c2001" class="xRef Task">Completing a Swift 4 minimize inference migration</a> to complete the conversion.</p></li><li><p><strong>Match Swift 3 Behavior:</strong> Add an <code>@objc</code> attribute to your code anywhere it would be implicitly inferred by the compiler. This option does not change the size of your binary as it adds explicit <code>@objc</code> attributes everywhere they were implicitly added by Swift 3.</p></li></ul><p>For more information, see <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithObjective-CAPIs.html#//apple_ref/doc/uid/TP40014216-CH4-ID55" class="URL">Configuring Swift Interfaces in Objective-C</a> in Using Swift with Cocoa and Objective-C, and the entry for <code>objc</code> in <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/Attributes.html" class="URL">The Swift Programming Language</a>. </p><div id="devded6c2001" class="Task"><h2 role="button" aria-controls="aria-devded6c2001" aria-expanded="true" class="Name">Completing a Swift 4 minimize inference migration</h2><div class="TaskBody" role="region" aria-hidden="false" id="aria-devded6c2001"><p>Sources converted using the “Minimize” inference option may require additional changes that are found using both build-time and run-time warnings. Follow these steps after you complete the initial Swift 4 migration.</p><ol><li><p>Build your project.</p></li><li><p>Fix the warnings that indicate places where you need to add the <code>@objc</code> attribute.</p></li><li><p>Test your code and fix warnings that indicate a deprecated implicit <code>@objc</code> reference is used. Continue to test your code until no warnings occur.</p></li><li><p>Open the <a href="dev382dac089.html#dev382dac089" class="xRef AppleTopic">build setting</a> for the project.</p></li><li><p>Set <code>Swift 3 @objc inference</code> to Default.</p></li></ol></div></div><div id="dev2a3be7a83" class="Subhead"><h2 class="Name">Build Warnings: Swift</h2><p>Warnings in Swift are of the form:</p><p>warning: argument of ‘#selector’ refers to instance method <em>methodName</em>() that depends on ‘@objc’ attribute inference deprecated in Swift 4</p><div class="Example"><p>The following Swift code results in the warning shown below.</p><div class="CodeLines"><code class="CodeLine">class MyClass : NSObject {</code><code class="CodeLine">   func foo() {</code><code class="CodeLine">   }</code><code class="CodeLine">  </code><code class="CodeLine">   func bar() {</code><code class="CodeLine">      self.perform(#selector(MyClass.foo)</code><code class="CodeLine">   }</code><code class="CodeLine">}</code></div><p>warning: argument of ‘#selector’ refers to instance method ‘foo’ in ‘MyClass’ that depends on ‘@objc’ attribute inference deprecated in Swift 4</p></div></div><div id="dev19a641ed2" class="Subhead"><h2 class="Name">Build Warnings: Objective-C</h2><p>Warning in Objective-C are of the form:</p><p>warning: Swift method <em>ClassName</em>.<em>methodName</em>() uses @objc inference deprecated in Swift 4; add @objc to provide an Objective-C entrypoint</p><div class="Example"><p>The following Objective-C code results in the warning shown below</p><div class="CodeLines"><code class="CodeLine">@implementation MyClass (ObjCMethods)</code><code class="CodeLine">- (void)other {</code><code class="CodeLine">      [self foo];</code><code class="CodeLine">   }</code><code class="CodeLine">@end</code></div><p>warning: Swift method MyClass.foo uses @objc inference deprecated in Swift 4; add @objc to provide an Objective-C entrypoint</p></div></div><div id="dev11b4036a1" class="Subhead"><h2 class="Name">Fix Build Warnings</h2><p>To fix a warning, add an <code>@objc</code> attributed to the declaration of the function or other symbol that is identified in the warning.</p><div class="Example"><p>Fix both of the warnings shown in the examples by adding and <code>@objc</code> attribute to the declaration of <code>foo</code>.</p><div class="CodeLines"><code class="CodeLine">class MyClass : NSObject {</code><code class="CodeLine">   <strong>@objc</strong> func foo() {</code><code class="CodeLine">   }</code><code class="CodeLine">  </code><code class="CodeLine">   func bar() {</code><code class="CodeLine">      self.perform(#selector(MyClass.foo)</code><code class="CodeLine">   }</code><code class="CodeLine">}</code></div></div></div><div id="dev2f38657de" class="Subhead"><h2 class="Name">Runtime Warnings</h2><p>Runtime warnings appear in the console and are of the form:</p><p>***Swift runtime: <em>ClassName</em>.swift:<em>lineInFile</em>:<em>columnInLine</em>: entrypoint -[<em>ClassName</em> <em>methodName</em>] generated by implicit @objc inference is deprecated and will be removed in Swift 4; add explicit @objc to the declaration to emit the Objective-C entrypoint in Swift 4 and suppress this message</p><p>To fix a warning add an <code>@objc</code> attributed to the declaration of the identified function or symbol.</p><p>The most common reasons for the warning are:</p><ul><li><p>Use of <code>SEL</code> in Objective-C.</p></li><li><p>Using one of the <code>perform</code> methods in Swift.</p></li><li><p>Using one of the <code>performSelector</code> methods in Objective-C.</p></li><li><p>Using an <code>@IBOutlet</code> or @<code>IBAction</code>. </p></li></ul><div class="Example"><p>The following Swift code results in the run-time warning shown below.</p><div class="CodeLines"><code class="CodeLine">class MyClass : NSObject {</code><code class="CodeLine">   func foo() {</code><code class="CodeLine">   }</code><code class="CodeLine">  </code><code class="CodeLine">   func bar() {</code><code class="CodeLine">      let selectorName = "foo"</code><code class="CodeLine">      self.perform(Selector(selectorName)</code><code class="CodeLine">   }</code><code class="CodeLine">}</code></div><p>***Swift runtime: MyClass.swift:7:7: entrypoint -[MyClass foo] generated by implicit @objc inference is deprecated and will be removed in Swift 4; add explicit @objc to the declaration to emit the Objective-C entrypoint in Swift 4 and suppress this message</p></div></div></body></html>